#Temp Note
import json, os, sys, time
import maya.cmds as cmds
path = "T:\Han\productionUtils\CFX_Automation\config"

def getJsonObj(dirname,configFile):   
    f = open(os.path.join(dirname, configFile))
    config = json.load(f)
    f.close()
    return config
  
refs = cmds.ls(type='reference')
allCtrls = []
for ref in refs:
    try:
       if cmds.referenceQuery(ref, il=True):
           fpath = cmds.referenceQuery(ref, filename=True, wcn=True)
           nspace = cmds.referenceQuery(ref, ns=True).split(":")[1]
           basename = os.path.basename(fpath)
           tarJson = '.'.join(basename.split('.')[0:-1]) + '.json'
           configPath = os.path.join(path, tarJson)
          
           if os.path.isfile(configPath):
               config = getJsonObj(path, tarJson)               
               for i in config['ctrl']:
                   ctrlName = i['name']
                   tarCtrl = ('|%s:'%nspace).join(ctrlName.split('|'))
                   for attrName in i['attr'].keys():                       
                       animKeyNum = cmds.keyframe(tarCtrl, at=attrName, q=True)
                       if not animKeyNum:
                           #No Key
                           attrVal = cmds.getAttr('%s.%s'%(tarCtrl,attrName))
                           if attrVal == i['attr'][attrName]:
                               #this attr is default val
                               pass
                           else:
                               #this attr val changed
                               print '%s.%s val cahnged, but not keyed.'%(tarCtrl,attrName)
                               print attrVal
                               print i['attr'][attrName]
                      else:
                          
    except:
        pass
